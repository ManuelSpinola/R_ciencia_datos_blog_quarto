---
title: "crcc: cambio climático Costa Rica"
subtitle: "crcc es un paquete de R con datos geoespaciales para el análisis del impacto del cambio climático en Costa Rica"
image: "imagenes/crcc_a.png"
author:
  - name: Manuel Spínola
    url: http://www.icomvis.una.ac.cr/index.php/manuel
    affiliation: ICOMVIS - UNA
    affiliation-url: http://www.icomvis.una.ac.cr/
    orcid: 0000-0002-7839-1908
date: 2023-01-30
citation: true
toc: true
toc-title: Tabla de contenido
toc-location: left
toc-depth: 4
bibliography: references.bib
lang: es
draft: false
execute: 
  echo: false
  include: false
categories:
  - "Análisis y Visualización de Datos"
---

```{r}
#| include: true
#| out-width: 40%
#| fig-align: center
library(knitr)
include_graphics("imagenes/crcc_a.png")
```

# Descripción del paquete

**crcc** es un paquete de R con funciones para bajar información climática para el análisis del impacto del cambio climático en Costa Rica, escencialmente mapeo y modelaje espacial.

El paquete contiene 2 funciones:

**cr_historic_worldclim**: permite bajar información climática histórica (cercana al presente) para Costa Rica desde [WorldClim](https://www.worldclim.org/).

**cr_future_worldclim**: permite bajar información climática de condiciones futuras para Costa Rica desde [WorldClim](https://www.worldclim.org/).

Los datos a los que se puede acceder son proyecciones climáticas futuras reducidas en escal del proyecto [CMIP6](https://wcrp-cmip.org/cmip-phase-6-cmip6/). Para más información visitar [WorldClim](https://www.worldclim.org/).

La información se basa en valores mensuales de temperatura mínima, temperatura máxima y precipitación procesados para 23 modelos climáticos globales (GCMs).

Los modelos climáticos globales disponibles son: "ACCESS-CM2", "ACCESS-ESM1-5", "BCC-CSM2-MR", "CanESM5", "CanESM5-CanOE", "CMCC-ESM2", "CNRM-CM6-1", "CNRM-CM6-1-HR", "CNRM-ESM2-1", "EC-Earth3-Veg", "EC-Earth3-Veg-LR", "FIO-ESM-2-0", "GISS-E2-1-G", "GISS-E2-1-H", "HadGEM3-GC31-LL", "INM-CM4-8", "INM-CM5-0", "IPSL-CM6A-LR", "MIROC-ES2L", "MIROC6","MPI-ESM1-2-HR", "MPI-ESM1-2-LR", "MRI-ESM2-0", "UKESM1-0-LL".

Para 4 SSPs (Shared Socioeconomic Pathways):

-   ssp126
-   ssp245
-   ssp370
-   ssp585

Para 4 períodos de tiempo:

-   2021-2040
-   2041-2060
-   2061-2080
-   2081-2100

# Variables Bioclimáticas

| Variable | Descripción                                                   | Unidad |
|------------------|-----------------------------------|------------------|
| BIO1     | Temperatura media anual                                       | °C     |
| BIO2     | Rango medio diurno (Promedio mensual (max temp - min temp))   | °C     |
| BIO3     | Isotérmica (BIO2/BIO7) (×100)                                 | °C     |
| BIO4     | Estacionalidad de temperatura (desvío estándar ×100)          | °C     |
| BIO5     | Temperatura máxima del mes más cálido                         | °C     |
| BIO6     | Temperatura mínima del mes más frío                           | °C     |
| BIO7     | BIO7 Rango Anual de Temperatura (BIO5-BIO6)                   | °C     |
| BIO8     | Temperatura media del trimestre más húmedo                    | °C     |
| BIO9     | Temperatura media del trimestre más seco                      | °C     |
| BIO10    | Temperatura media del trimestre más cálido                    | °c     |
| BIO11    | Temperatura media del trimestre más frío                      | °C     |
| BIO12    | Precipitación anual                                           | mm     |
| BIO13    | Precipitación del mes más húmedo                              | mm     |
| BIO14    | Precipitación del mes más seco                                | mm     |
| BIO15    | Estacionalidad de la precipitación (Coeficiente de Variación) | \-     |
| BIO16    | Precipitación del trimestre más húmedo                        | mm     |
| BIO17    | Precipitación del trimestre más seco                          | mm     |
| BIO18    | Precipitación del trimestre más cálido                        |        |
| BIO19    | Precipitación del trimestre más frío                          |        |

# Instalación y uso de **crcc**

Para poder utilizar el paquete se debe instalar el paquete devtools:

```{r}
#| include: true
#| echo: true
#| eval: false
#| message: false
install.packages("devtools")
```

Cargar el paquete devtools:

```{r}
#| include: true
#| echo: true
library(devtools)
```

Luego proceder a instalar crcc y crgeo desde github:

```{r}
#| include: true
#| echo: true
#| eval: false
#| message: false
#| warning: false
devtools::install_github("ManuelSpinola/crcc")
devtools::install_github("ManuelSpinola/crgeo")
```

y cargar los paquetes:

```{r}
#| include: true
#| echo: true
library(crcc)
library(crgeo)
```

Para este ejemplo con los datos que se incluyen en el paquete **crcc** se requieren los paquetes tidyverse y stars:

```{r}
#| include: true
#| echo: true
#| message: false
library(tidyverse)
library(stars)
```

En este ejemplo se muestra como bajar datos de temperatura máxima para Costa Rica para el período 2021 - 2040 para el modelo INM-CM4-8 y el spp 126:
```{r}
#| include: true
#| echo: true
#| message: false
#| warning: false
max_temp <- cr_future_worldclim(var = "tmax",
  res = 10,
  gcm = "ACCESS-CM2",
  ssp = "ssp126",
  interval = "2041-2060",
  path = tempdir(),
  return_stack = TRUE)
```

```{r}
#| include: true
#| echo: true
ggplot() +
  geom_stars(data = max_temp) +
  scale_fill_viridis_c(name = "Temperatura (°C)", na.value = "transparent", option = "C", direction = -1) +
  theme_minimal() +
  coord_equal()
```

Para más información del paquete se puede visitar este enlace <https://github.com/ManuelSpinola/crcc>
